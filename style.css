/* ===========================
   Jazz Trumpet Exercise Lab â€” Warm Modern Theme
   Softer warmth, readable spacing, glass cards, funnel filters.
   =========================== */

:root{
  /* warm palette */
  --bg:#141012;          /* warm charcoal */
  --bg-2:#1a1416;
  --panel:#1f191b;       /* warm panel */
  --panel-2:#221b1e;
  --ink:#fff6f0;         /* warm white */
  --muted:#cbbbb2;       /* muted warm */
  --accent:#ff9d6c;      /* coral-peach */
  --accent-2:#ffd3bd;    /* pale peach */
  --danger:#ff5a6e;
  --warn:#ffc861;
  --chip:#2a2225;

  --r-outer:18px;
  --r-inner:12px;
  --shadow-lg: 0 18px 60px rgba(0,0,0,.5);
  --shadow-md: 0 10px 30px rgba(0,0,0,.35);
  --shadow-sm: 0 6px 18px rgba(0,0,0,.25);

  --fz-1: clamp(14px, 3.5vw, 16px);
  --fz-2: clamp(16px, 4.0vw, 18px);
  --fz-3: clamp(18px, 4.5vw, 20px);
  --lh: 1.6;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; color:var(--ink); background:
    radial-gradient(70% 120% at 10% -10%, #261a1f 0%, transparent 60%),
    radial-gradient(60% 100% at 100% 0%, #2a1f18 0%, transparent 60%),
    var(--bg);
  font-family:Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  line-height: var(--lh);
}

#bgCanvas{
  position:fixed; inset:0; width:100%; height:100%; z-index:-1; display:block;
  opacity:.18; filter: blur(0.2px) saturate(0.9);
}
.reduced-motion #bgCanvas{ display:none; }

/* Header */
.hdr{
  position:sticky; top:0; z-index:20;
  background:linear-gradient(180deg, rgba(20,16,18,.92), rgba(20,16,18,.78) 72%, transparent);
  backdrop-filter: blur(10px) saturate(1.1);
  border-bottom:1px solid rgba(255,255,255,.06);
  padding:14px 12px 10px;
}
.brand{display:flex; align-items:center; gap:12px; flex-wrap:wrap}
.brand-logo{
  width:44px; height:44px; border-radius:14px;
  background: radial-gradient(65% 65% at 30% 30%, #ffd3bd 0%, #ffb48f 35%, #ff9d6c 70%, #e77b4f 100%);
  display:grid; place-items:center; box-shadow:0 0 0 2px rgba(255,255,255,.06) inset, var(--shadow-sm);
  color:#4b2313; font-size:22px;
}
.brand-meta h1{font-size:var(--fz-3); margin:0 0 4px 0; letter-spacing:.2px}
.sub{color:var(--muted); font-size:var(--fz-1)}

.theme-switch{
  margin-left:auto; display:flex; align-items:center; gap:8px; flex-wrap:wrap;
}
.theme-switch select{
  appearance:none; background:var(--panel); color:var(--ink); border:1px solid rgba(255,255,255,.12);
  border-radius:10px; padding:8px 10px; font-weight:600;
  box-shadow: var(--shadow-sm) inset;
}
.reduce-motion{
  display:flex; align-items:center; gap:6px; color:var(--muted); font-size:var(--fz-1);
  background:rgba(255,255,255,.04); padding:6px 8px; border-radius:10px;
  border:1px solid rgba(255,255,255,.08);
}

.toolbar{display:grid; grid-template-columns:1fr; gap:12px; margin-top:10px}

/* level */
.seg{
  display:flex; background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.015));
  border-radius:14px; padding:4px; gap:4px;
  box-shadow: 0 1px 0 rgba(255,255,255,.06) inset, var(--shadow-md);
  overflow:auto;
}
.seg .lv{
  appearance:none; border:0; background:transparent; color:var(--muted);
  padding:8px 12px; border-radius:10px; font-weight:700; font-size:var(--fz-1); white-space:nowrap;
}
.seg .lv.active{background:var(--chip); color:var(--ink); transform:translateY(-1px)}

/* funnel filters */
.funnel{display:grid; grid-template-columns:1fr 1fr 1fr auto; gap:8px; align-items:end}
@media (max-width:800px){ .funnel{grid-template-columns:1fr; align-items:stretch} }
.pick{display:flex; flex-direction:column; gap:6px}
.pick span{font-size:.9rem; color:var(--muted)}
.pick select{
  appearance:none; background:var(--panel); color:var(--ink); border:1px solid rgba(255,255,255,.12);
  border-radius:10px; padding:10px 12px; font-weight:600; box-shadow: var(--shadow-sm) inset;
}
.pick select:disabled{opacity:.6; filter:saturate(.6)}

.btn{
  appearance:none; border:0; background:linear-gradient(180deg, var(--accent), #ff8c4f);
  color:#3b1d10; font-weight:900; padding:12px 14px; border-radius:12px; cursor:pointer;
  transition:.15s transform ease, .25s box-shadow ease; position:relative; overflow:hidden;
  box-shadow: 0 10px 25px rgba(255,157,108,.25), 0 0 0 1px rgba(0,0,0,.1) inset;
}
.btn:active{transform:translateY(1px)}
.btn.secondary{
  background:linear-gradient(180deg, #2d2327, #221b1e);
  color:var(--ink); box-shadow: var(--shadow-md), 0 0 0 1px rgba(255,255,255,.07) inset;
}
.btn.ghost{background:transparent; color:var(--ink); border:1px solid rgba(255,255,255,.2); box-shadow:none}
.btn.danger{background:linear-gradient(180deg, #ff5a6e, #e1495c); color:#33050c}

.app{display:flex; flex-direction:column; min-height:100dvh}
.main{flex:1; display:flex; flex-direction:column; gap:14px; padding:14px 12px 96px}
.sheet{display:none}
.sheet.active{display:block; animation:fade .22s both}

.card{
  background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.03));
  border:1px solid rgba(255,255,255,.08);
  border-radius: var(--r-outer); padding:14px; box-shadow: var(--shadow-lg);
  animation:slideIn .3s ease both;
}
.card h2{margin:.2rem 0 .35rem; font-size:var(--fz-2)}
.badge{
  display:inline-flex; gap:6px; align-items:center; padding:6px 10px; border-radius:10px;
  background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.08); font-size:var(--fz-1);
}

.controls-row{display:flex; gap:10px; align-items:center; flex-wrap:wrap; margin-top:10px}

.meta{display:flex; gap:8px; align-items:center; flex-wrap:wrap; color:var(--muted); font-size:var(--fz-1)}
.level-tag{
  font-size:.78rem; padding:.28rem .55rem; border-radius:999px; background:rgba(255,210,189,.18);
  color:#ffd3bd; border:1px solid rgba(255,210,189,.35);
}

.tags{display:flex; flex-wrap:wrap; gap:6px; margin-top:6px}
.tag{
  font-size:.78rem; padding:.26rem .55rem; border-radius:999px; background:rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.08)
}

.steps{margin:10px 0 2px; line-height:1.55}
.steps li{margin:.22rem 0}
.resbox{
  margin-top:10px; background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.015));
  border:1px solid rgba(255,255,255,.08); border-radius:12px; padding:10px; box-shadow: var(--shadow-sm) inset;
}
.resbox h3{font-size:1rem; margin:.2rem 0 .4rem}
.res-items{display:grid; gap:8px}
.res-item{
  display:flex; gap:10px; align-items:flex-start; background:var(--panel-2); border:1px solid rgba(255,255,255,.07);
  padding:8px 10px; border-radius:10px
}
.res-item .dot{
  width:8px; height:8px; background:var(--accent); border-radius:50%; margin-top:.45rem; box-shadow:0 0 0 4px rgba(255,157,108,.22)
}

.hint{color:var(--muted); font-size:var(--fz-1)}
.list{display:grid; gap:12px}
.grid2{display:grid; gap:12px}
.grid2 > .card{min-height:240px}
@media(min-width:760px){ .grid2{grid-template-columns:1fr 1fr} }

.notes textarea{
  width:100%; min-height:120px; border-radius:12px; border:1px solid rgba(255,255,255,.12);
  background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.02)); color:var(--ink); padding:10px;
  box-shadow: var(--shadow-sm) inset;
}
.inline-tip{
  background:rgba(255,255,255,.06); border:1px dashed rgba(255,255,255,.22);
  border-radius:10px; padding:8px 10px; font-size:var(--fz-1); color:var(--muted); margin-top:10px
}
.kv{display:grid; grid-template-columns:repeat(2,1fr); gap:8px; margin-top:8px}
.kv .k{color:var(--muted)} .kv .v{font-weight:700}

/* Bottom nav */
.bottom-nav{
  position:fixed; z-index:30; left:0; right:0; bottom:0;
  background:rgba(26,20,22,.9); backdrop-filter:blur(10px) saturate(1.1);
  border-top:1px solid rgba(255,255,255,.08); display:grid; grid-template-columns:repeat(6,1fr);
}
.nav-btn{
  appearance:none; border:0; background:transparent; color:var(--muted); padding:10px 6px; font-size:var(--fz-1);
  display:flex; flex-direction:column; align-items:center; gap:4px; cursor:pointer;
}
.nav-btn.active{color:var(--accent-2); font-weight:800}

/* THEME VARIANTS (warm family) */
:root.theme-sunset{ --bg:#141012; --panel:#1f191b; --accent:#ff9d6c; --accent-2:#ffd3bd; }
:root.theme-amber{ --bg:#171106; --panel:#20190c; --accent:#ffb34d; --accent-2:#ffe0b5; }
:root.theme-rosewood{ --bg:#180f12; --panel:#231418; --accent:#ff7fa3; --accent-2:#ffd0df; }
:root.theme-olive{ --bg:#13140f; --panel:#1c1f16; --accent:#b6d46a; --accent-2:#e9f7b8; }

/* reduced motion */
@media (prefers-reduced-motion: reduce){
  * { animation: none !important; transition: none !important; }
  #bgCanvas { display:none; }
}
@keyframes slideIn{from{opacity:0; transform:translateY(6px)} to{opacity:1; transform:translateY(0)}}
@keyframes fade{from{opacity:0} to{opacity:1}}

/* a11y */
.sr-only{position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); border:0}